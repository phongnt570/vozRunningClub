{% load track_custom_utils %}

<table class="table table-striped table-hover">
    <thead>
    <tr>
        <th>
            <span class="d-none d-lg-inline">Hạng</span>
            <span class="d-inline d-lg-none">#</span>
        </th>
        <th>Strava</th>
        <th class="d-none d-lg-table-cell">Voz</th>
        <th class="text-end d-none d-md-table-cell">Lượt</th>
        <th class="text-end d-none d-lg-table-cell">Tốc độ TB</th>
        <th class="text-end">Q. đường</th>
        <th class="text-end d-none d-md-table-cell">Cự ly đ/k</th>
        <th class="text-end d-none d-md-table-cell">Thiếu</th>
        <th class="text-end">Ủng hộ</th>
    </tr>
    </thead>
    <tbody>
    {% for weekly_progress in data %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>
                {% if club_status %}
                    {% if weekly_progress.user.profile.strava_club_joined %}
                        <span class="text-success" title="Đã tham gia Strava Club">
                            <i class="fas fa-check-circle"></i>
                        </span>
                    {% else %}
                        <span class="text-danger"
                              title="Chưa tham gia Strava Club">
                            <i class="fas fa-times-circle"></i>
                        </span>
                    {% endif %}
                    &nbsp;
                {% endif %}
                <a href="https://strava.com/athletes/{{ user_2_strava_id|get_item:weekly_progress.user.id }}"
                   target="_blank"
                   class="text-decoration-none fw-semibold">
                    {{ weekly_progress.user.get_full_name }}
                </a>
            </td>
            <td class="d-none d-lg-table-cell">{{ weekly_progress.user.profile.voz_name }}</td>
            <td class="text-end d-none d-md-table-cell">{{ weekly_progress.runs }}</td>
            <td class="text-end d-none d-lg-table-cell">{{ weekly_progress.average_pace|pace_format }}/km</td>
            <td class="text-end">{{ weekly_progress.distance|floatformat:1 }} km</td>
            <td class="text-end d-none d-md-table-cell">
                {% if weekly_progress.registered_mileage.distance > 0 %}
                    {{ weekly_progress.registered_mileage.distance|floatformat:0 }} km
                {% else %}
                    <span class="text-secondary">--</span>
                {% endif %}
            </td>
            <td class="text-end d-none d-md-table-cell">{{ weekly_progress|missing_distance_str }}</td>
            <td class="text-end">
                {% if weekly_progress.registered_mileage.distance == 0 %}
                    <span class="text-secondary">--</span>
                {% else %}
                    {{ weekly_progress.donation|floatformat:"g" }} ₫
                {% endif %}
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>